<!doctype html>
<html lang="en" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=yes, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Thymeleaf Form handling Demo</title>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/main.css">
</head>

<body class="container-fluid">

<header>
    <nav class="navbar navbar-expand-sm navbar-custom mx-5">

        <div class="container-fluid">
          <!-- Links -->
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link custom-a" href="#">Our Products</a>
            </li>
            <li class="nav-item">
              <a class="nav-link custom-a" href="#">Promotions</a>
            </li>
            <li class="nav-item">
              <a class="nav-link custom-a" href="#">About Us</a>
            </li>
          </ul>
        </div>
      
      </nav>
</header>


    <div class="row mx-5">
        <div class="col-md-6">
            <h2 class="mt-4 mb-6">Contact Us</h2>
            <form method="post" th:action="@{/inquiry/form}" th:object="${inquiry}">
                
                <div class="form-group">
                    <p class="mt-4 mb-0">Are you an existing customer?</p>
                    <input type="hidden" id="isCustomerCheck" name="isCustomerCheck" th:field="*{customer}">
                    <div class="form-check form-check-inline my-1">
                        <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault1" onchange="set_isCustomerCheck_true();">
                        <label class="form-check-label" for="flexRadioDefault1">
                          Yes
                        </label>
                      </div>
                      <div class="form-check form-check-inline my-0">
                        <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault2" onchange="set_isCustomerCheck_false();" checked>
                        <label class="form-check-label" for="flexRadioDefault2">
                          No
                        </label>
                      </div>
                </div>
                
                <div class="form-group w-50">
                    <input type="hidden" id="topic" name="topic" th:field="*{request}">
                    <label for="topicSelect">Your Request</label>
                    <select class="form-control" id="topicSelect" onchange="update();">
                        <option>I like a callback</option>
                        <option>I have a feedback</option>
                    </select>
                </div>

                <div class="form-group w-50">
                    <textarea class="form-control" style="display:block;" placeholder="Please provide your feedback here. (Max. 500 characters limit)" id="inquiryText" rows="4"th:field="*{message_text}"></textarea>
                </div>

                <div class="form-group w-50">
                    <p>Your contact details</p>
                    <input id="first_name" placeholder="First Name" required type="text" th:field="*{first_name}"
                           class="form-control"/>
                </div>

                <div class="form-group w-50">
                    <input id="last_name" placeholder="Last Name" required type="text" th:field="*{last_name}"
                           class="form-control"/>
                </div>

                <div class="form-group w-50">
                    <input id="contactNumber" placeholder="Contact Number" required type="text" th:field="*{contact_number}"
                           class="form-control"/>
                </div>
            
                <div class="form-check my-3">
                    <input class="form-check-input" type="checkbox" value="" id="disclaimerCheck" name="disclaimerCheck" onchange="check_checkbox();">
                    <label class="form-check-label" for="disclaimerCheck">
                      <span style="color: #948a54;">Yes, I agree to the disclaimers before submitting this request.</span> 
                    </label>
                </div>
                
                <input type="submit" id="formSubmit" class="btn btn-danger me-2" value="Submit" disabled>

            </form>
        </div>
        <div class="col-md-6"></div>
    </div>




    <script type="text/javascript">
        function update() {
            var select = document.getElementById('topicSelect');
            var option = select.options[select.selectedIndex];

            document.getElementById('topic').value = option.text;
            var inquiry = document.getElementById("inquiryText");

            if (option.text == 'I have a feedback'){
                inquiry.style.display = "block";
            }else{
                inquiry.style.display = "none";
                inquiry.value = ""
            }
            
        }
        update();

        function check_checkbox(){
            var checkbx = document.getElementById('disclaimerCheck');
            document.getElementById("formSubmit").disabled = !checkbx.checked;
        }

        function set_isCustomerCheck_true(){
          document.getElementById("isCustomerCheck").value = true
        }
        
        function set_isCustomerCheck_false(){
          document.getElementById("isCustomerCheck").value = false
        }

    </script>

</body>
</html>